import os
import json
from mist_json import MistJson

def make_clean_mist_samples(filepath, file_list):
    # for idx, old_file in enumerate(file_list):
        # print(idx, old_file)
        # mist = MistJson()
        # file = open(old_file)
        # new_file = json.load(file)
        # mist.run(new_file, idx)
        # print(f'Cleaned: {old_file}. \n Stored as: mist{idx}.json')
    for idx, file in enumerate(file_list):
                with open(f'{filepath}/{file}') as file:
                    file_data = json.load(file)
                    mist = MistJson()
                    mist.run(file_data, idx)


if __name__ == '__main__':
    filepath = '../../MalwareTrainingSets/trainingSets/Benign'
    file_list = os.listdir(filepath)
    # print(file_list)
    make_clean_mist_samples(filepath, file_list)